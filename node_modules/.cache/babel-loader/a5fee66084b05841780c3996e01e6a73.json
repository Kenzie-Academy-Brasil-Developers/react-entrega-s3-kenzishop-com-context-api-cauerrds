{"ast":null,"code":"import { addCart } from \"./actions\";\nexport const addCartThhunk = produto => (dispatch, getStore) => {\n  const lista = JSON.parse(localStorage.getItem(\"@kenzieShop/CART\")) || [];\n  const exist = lista.find(prod => prod.id === produto.id);\n\n  if (exist) {\n    console.log(\"exist\");\n    const novaLista = lista.map(prod => {\n      return prod.id === produto.id ? { ...prod,\n        quantity: prod.quantity + 1\n      } : prod;\n    }); // console.log(novaLista);\n\n    localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista));\n    dispatch(addCart(novaLista));\n  } else {\n    console.log(\"nem\");\n    const novaLista = [...lista, { ...produto,\n      quantity: 1\n    }];\n    localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista)); // console.log(novaLista);\n\n    dispatch(addCart(novaLista));\n  }\n};\nexport const rmvCartThunk = produto => (dispatch, getStore) => {\n  const {\n    cart\n  } = getStore();\n  const novaLista = cart.filter(prod => {\n    if (prod.id === produto.id && produto.quantity > 1) {\n      produto.quantity = produto.quantity - 1;\n      return prod;\n    } else {\n      return prod;\n    }\n  });\n  console.log(novaLista);\n  localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista));\n  dispatch(addCart(novaLista));\n};","map":{"version":3,"sources":["/home/cave/React/react-entrega-s3-kenzieshop-cauerrds/src/store/modules/cart/thunks.js"],"names":["addCart","addCartThhunk","produto","dispatch","getStore","lista","JSON","parse","localStorage","getItem","exist","find","prod","id","console","log","novaLista","map","quantity","setItem","stringify","rmvCartThunk","cart","filter"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;AAEA,OAAO,MAAMC,aAAa,GAAIC,OAAD,IAAa,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAChE,QAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAAX,KAAwD,EAAtE;AACA,QAAMC,KAAK,GAAGL,KAAK,CAACM,IAAN,CAAYC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYX,OAAO,CAACW,EAAzC,CAAd;;AACA,MAAIH,KAAJ,EAAW;AACTI,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,UAAMC,SAAS,GAAGX,KAAK,CAACY,GAAN,CAAWL,IAAD,IAAU;AACpC,aAAOA,IAAI,CAACC,EAAL,KAAYX,OAAO,CAACW,EAApB,GACH,EAAE,GAAGD,IAAL;AAAWM,QAAAA,QAAQ,EAAEN,IAAI,CAACM,QAAL,GAAgB;AAArC,OADG,GAEHN,IAFJ;AAGD,KAJiB,CAAlB,CAFS,CAOT;;AACAJ,IAAAA,YAAY,CAACW,OAAb,CAAqB,kBAArB,EAAyCb,IAAI,CAACc,SAAL,CAAeJ,SAAf,CAAzC;AACAb,IAAAA,QAAQ,CAACH,OAAO,CAACgB,SAAD,CAAR,CAAR;AACD,GAVD,MAUO;AACLF,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,UAAMC,SAAS,GAAG,CAAC,GAAGX,KAAJ,EAAW,EAAE,GAAGH,OAAL;AAAcgB,MAAAA,QAAQ,EAAE;AAAxB,KAAX,CAAlB;AACAV,IAAAA,YAAY,CAACW,OAAb,CAAqB,kBAArB,EAAyCb,IAAI,CAACc,SAAL,CAAeJ,SAAf,CAAzC,EAHK,CAIL;;AACAb,IAAAA,QAAQ,CAACH,OAAO,CAACgB,SAAD,CAAR,CAAR;AACD;AACF,CApBM;AAsBP,OAAO,MAAMK,YAAY,GAAInB,OAAD,IAAa,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC/D,QAAM;AAAEkB,IAAAA;AAAF,MAAWlB,QAAQ,EAAzB;AACA,QAAMY,SAAS,GAAGM,IAAI,CAACC,MAAL,CAAaX,IAAD,IAAU;AACtC,QAAIA,IAAI,CAACC,EAAL,KAAYX,OAAO,CAACW,EAApB,IAA0BX,OAAO,CAACgB,QAAR,GAAmB,CAAjD,EAAoD;AAClDhB,MAAAA,OAAO,CAACgB,QAAR,GAAmBhB,OAAO,CAACgB,QAAR,GAAmB,CAAtC;AACA,aAAON,IAAP;AACD,KAHD,MAGO;AACL,aAAOA,IAAP;AACD;AACF,GAPiB,CAAlB;AAQAE,EAAAA,OAAO,CAACC,GAAR,CAAYC,SAAZ;AACAR,EAAAA,YAAY,CAACW,OAAb,CAAqB,kBAArB,EAAyCb,IAAI,CAACc,SAAL,CAAeJ,SAAf,CAAzC;AACAb,EAAAA,QAAQ,CAACH,OAAO,CAACgB,SAAD,CAAR,CAAR;AACD,CAbM","sourcesContent":["import { addCart } from \"./actions\";\n\nexport const addCartThhunk = (produto) => (dispatch, getStore) => {\n  const lista = JSON.parse(localStorage.getItem(\"@kenzieShop/CART\")) || [];\n  const exist = lista.find((prod) => prod.id === produto.id);\n  if (exist) {\n    console.log(\"exist\");\n    const novaLista = lista.map((prod) => {\n      return prod.id === produto.id\n        ? { ...prod, quantity: prod.quantity + 1 }\n        : prod;\n    });\n    // console.log(novaLista);\n    localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista));\n    dispatch(addCart(novaLista));\n  } else {\n    console.log(\"nem\");\n    const novaLista = [...lista, { ...produto, quantity: 1 }];\n    localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista));\n    // console.log(novaLista);\n    dispatch(addCart(novaLista));\n  }\n};\n\nexport const rmvCartThunk = (produto) => (dispatch, getStore) => {\n  const { cart } = getStore();\n  const novaLista = cart.filter((prod) => {\n    if (prod.id === produto.id && produto.quantity > 1) {\n      produto.quantity = produto.quantity - 1;\n      return prod;\n    } else {\n      return prod;\n    }\n  });\n  console.log(novaLista);\n  localStorage.setItem(\"@kenzieShop/CART\", JSON.stringify(novaLista));\n  dispatch(addCart(novaLista));\n};\n"]},"metadata":{},"sourceType":"module"}